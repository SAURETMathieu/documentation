"use strict";(self.webpackChunksauret_doc=self.webpackChunksauret_doc||[]).push([[8165],{131:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>d,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var s=n(5893),i=n(1151);const a={id:"express-server",title:"Express server",sidebar_label:"Express server"},d=void 0,o={id:"javascript/express/express-server",title:"Express server",description:"Installation des d\xe9pendences",source:"@site/docs/javascript/express/server.md",sourceDirName:"javascript/express",slug:"/javascript/express/express-server",permalink:"/docs/javascript/express/express-server",draft:!1,unlisted:!1,editUrl:"https://github.com/SAURETMathieu/docs/javascript/express/server.md",tags:[],version:"current",frontMatter:{id:"express-server",title:"Express server",sidebar_label:"Express server"},sidebar:"javascript",previous:{title:"Express",permalink:"/docs/javascript/express"},next:{title:"Routeur",permalink:"/docs/javascript/express/router"}},t={},p=[{value:"Installation des d\xe9pendences",id:"installation-des-d\xe9pendences",level:2},{value:"Cr\xe9ation de l&#39;index \xe0 la racine du projet",id:"cr\xe9ation-de-lindex-\xe0-la-racine-du-projet",level:2},{value:"Exemple de fichier index \xe0 la racine du dossier app",id:"exemple-de-fichier-index-\xe0-la-racine-du-dossier-app",level:2},{value:"Exemple de fichier de configuration .env",id:"exemple-de-fichier-de-configuration-env",level:2},{value:"R\xe9cup\xe9ration des variables d&#39;environnement",id:"r\xe9cup\xe9ration-des-variables-denvironnement",level:2}];function c(e){const r={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"installation-des-d\xe9pendences",children:"Installation des d\xe9pendences"}),"\n",(0,s.jsx)(r.p,{children:"Pour commencer, installez les d\xe9pendances n\xe9cessaires avec la commande suivante :"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"  npm i express pg dotenv\n"})}),"\n",(0,s.jsx)(r.h2,{id:"cr\xe9ation-de-lindex-\xe0-la-racine-du-projet",children:"Cr\xe9ation de l'index \xe0 la racine du projet"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'import { createServer } from "node:http";\nimport "./app/helpers/env.load.js";\nimport app from "./app/index.app.js";\n\nconst server = createServer(app);\n\nconst PORT = process.env.PORT || 3000;\n\nserver.listen(PORT, () => {\n  console.log(`Server launched at http://localhost:${PORT}`);\n});\n'})}),"\n",(0,s.jsx)(r.h2,{id:"exemple-de-fichier-index-\xe0-la-racine-du-dossier-app",children:"Exemple de fichier index \xe0 la racine du dossier app"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'import express from "express";\nimport router from "./routers/index.router.js";\nimport errorMiddleware from "./middlewares/error.middleware.js";\nimport createDoc from "./helpers/api.doc.js";\nimport httpLogger from "./middlewares/httpLogger.js";\nimport corsMiddleware from "./middlewares/cors.js";\nimport uploadMiddleware from "./middlewares/uploadFile.js";\n\nconst app = express();\n\napp.use(corsMiddleware);\n\napp.use(express.json());\n\napp.use(express.urlencoded({ extended: true }));\n\napp.use(uploadMiddleware);\n\ncreateDoc(app);\n\napp.use(httpLogger);\n\napp.use(router);\n\napp.use(errorMiddleware);\n\nexport default app;\n'})}),"\n",(0,s.jsx)(r.h2,{id:"exemple-de-fichier-de-configuration-env",children:"Exemple de fichier de configuration .env"}),"\n",(0,s.jsxs)(r.p,{children:["Cr\xe9ez un fichier ",(0,s.jsx)(r.code,{children:".env"})," et ",(0,s.jsx)(r.code,{children:".env.example"})," ainsi qu'un fichier ",(0,s.jsx)(r.code,{children:".gitignore"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"PORT=4000\nDATABASE_URL=postgres://user:password@localhost/dbname\nAPI_DOCUMENTATION_ROUTE=/api-docs\nNODE_ENV=dev\n"})}),"\n",(0,s.jsx)(r.h2,{id:"r\xe9cup\xe9ration-des-variables-denvironnement",children:"R\xe9cup\xe9ration des variables d'environnement"}),"\n",(0,s.jsxs)(r.p,{children:["Cr\xe9ez un fichier ",(0,s.jsx)(r.code,{children:"env.load.js"})," dans le dossier ",(0,s.jsx)(r.code,{children:"helpers"})," et ajoutez le code suivant :"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'import { config } from "dotenv";\n\ndotenv.config();\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Importez ce fichier dans votre fichier ",(0,s.jsx)(r.code,{children:"index.js"})," \xe0 la racine du projet."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'import "./app/helpers/env.load.js";\n'})})]})}function l(e={}){const{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1151:(e,r,n)=>{n.d(r,{Z:()=>o,a:()=>d});var s=n(7294);const i={},a=s.createContext(i);function d(e){const r=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(a.Provider,{value:r},e.children)}}}]);