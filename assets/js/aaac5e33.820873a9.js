"use strict";(self.webpackChunksauret_doc=self.webpackChunksauret_doc||[]).push([[2416],{2610:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>d,toc:()=>i});var a=n(5893),l=n(1151);const s={id:"template-table",title:"Template Back office Table",sidebar_label:"Template de tableau Back-office"},o=void 0,d={id:"react/templates/template-table",title:"Template Back office Table",description:"Fonctions handle",source:"@site/docs/react/templates/backOfficeTable.md",sourceDirName:"react/templates",slug:"/react/templates/template-table",permalink:"/documentation/docs/react/templates/template-table",draft:!1,unlisted:!1,editUrl:"https://github.com/SAURETMathieu/docs/react/templates/backOfficeTable.md",tags:[],version:"current",frontMatter:{id:"template-table",title:"Template Back office Table",sidebar_label:"Template de tableau Back-office"},sidebar:"reactSidebar",previous:{title:"Template d'input dynamique",permalink:"/documentation/docs/react/templates/template-input"}},c={},i=[{value:"Fonctions handle",id:"fonctions-handle",level:2}];function r(e){const t={code:"code",h2:"h2",pre:"pre",...(0,l.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:""}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:'import { useState } from "react";\nimport { FontAwesomeIcon } from "@fortawesome/react-fontawesome";\nimport { faTrashCan, faPen } from "@fortawesome/free-solid-svg-icons";\nimport styles from "./AdminTable.module.css";\nimport DeleteModal from "../Modal/Delete";\nimport fetchData from "../../../services/api/call.api";\n\nfunction AdminTable({\n  filteredDatas,\n  handleDataDelete,\n  handleOpenUpdateModal,\n  route,\n}) {\n  const [selectedRow, setSelectedRow] = useState(null);\n  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n\n  if (filteredDatas.length) {\n    return (\n      <>\n        <div className={styles.container}>\n          <table className="table is-bordered is-hoverable is-fullwidth">\n            <thead>\n              <tr>\n                {Object.keys(filteredDatas[0]).map((columnName) => (\n                  <th\n                    className="has-text-centered has-text-white"\n                    key={columnName}\n                  >\n                    {columnName}\n                  </th>\n                ))}\n                <th className="has-text-centered has-text-white">Modifier</th>\n                <th className="has-text-centered has-text-white">Supprimer</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredDatas.map((data) => (\n                <tr\n                  key={data.id}\n                  onClick={() => handleRowClick(data.id)}\n                  className={selectedRow === data.id ? "is-selected" : ""}\n                >\n                  {Object.keys(data).map((columnName) => (\n                    <td key={columnName}>{data[columnName]}</td>\n                  ))}\n\n                  <td>\n                    <button\n                      className="is-danger"\n                      type="button"\n                      onClick={() => handleOpenUpdateModal(data)}\n                      aria-label="update"\n                    >\n                      <FontAwesomeIcon icon={faPen} />\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      type="button"\n                      onClick={() => handleOpenDeleteModal(data)}\n                      aria-label="delete"\n                    >\n                      <FontAwesomeIcon icon={faTrashCan} />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        {isDeleteModalVisible && (\n          <DeleteModal\n            handleClose={handleCloseDeleteModal}\n            handleConfirm={handleConfirmDelete}\n            item={selectedItem}\n            mode="delete"\n          />\n        )}\n      </>\n    );\n  }\n  return <p>Aucunes donn\xe9es.</p>;\n}\n\nexport default AdminTable;\n'})}),"\n",(0,a.jsx)(t.h2,{id:"fonctions-handle",children:"Fonctions handle"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:'const handleRowClick = (index) => {\n  setSelectedRow(index);\n};\n\nconst handleOpenDeleteModal = (item) => {\n  setIsDeleteModalVisible(true);\n  setSelectedItem(item);\n};\n\nconst handleCloseDeleteModal = () => {\n  setIsDeleteModalVisible(false);\n  setSelectedItem(null);\n};\n\nconst deleteElement = async () => {\n  const isDelete = await fetchData(\n    "DELETE",\n    `${route}/${selectedItem.id}`,\n    null,\n    true\n  );\n  return isDelete;\n};\n\nconst handleConfirmDelete = async () => {\n  const isDelete = await deleteElement();\n\n  if (isDelete) {\n    handleDataDelete(selectedItem.id);\n    setIsDeleteModalVisible(false);\n    setSelectedItem(null);\n  }\n};\n'})})]})}function m(e={}){const{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>d,a:()=>o});var a=n(7294);const l={},s=a.createContext(l);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);